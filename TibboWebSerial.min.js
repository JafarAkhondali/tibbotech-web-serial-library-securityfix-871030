!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("TibboWebSerial",[],e):"object"==typeof exports?exports.TibboWebSerial=e():t.TibboWebSerial=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";var n=r(1),i=n(r(2)),o=n(r(5)),a=n(r(6)),u=n(r(7)),s=0,c=1,f=7,l=8,h=13,d=20,p=30,v={DTR:1,RTS:2,CTS:16,DSR:32,RI:64,DCD:128},y={OFF:[0,0,0,0],CTS_RTS:[8,144,0,0],XON_XOFF:[0,19,400,400]},m={index:4,value:17},g={index:5,value:19},w=new TextDecoder,x="",b=function(){function t(e,r){(0,a.default)(this,t),this.usb=e,this.requestTimedOut=!1,this.modemState=null,this.DTR=null,this.RTS=null,this.CTS=null,this.DSR=null,this.RI=null,this.DCD=null,this.modemStateChanged=void 0,this.getFlowControlCallback=void 0,this.flowControlChanged=void 0,this.baudChangeOK=void 0,this.serDataArrival=void 0,this.serDataSent=void 0,this.connectFail=void 0,this.connectOK=void 0,this.disconnectOK=void 0,this.connectionError=void 0,this.autoReadData=void 0===r||void 0===r.autoReadData||r.autoReadData,this.flowControl=void 0!==r&&void 0!==r.flowControl?r.flowControl:"OFF",this.baud=void 0!==r&&void 0!==r.baud?r.baud:38400}return(0,u.default)(t,[{key:"connect",value:function(){var t=(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.usb.open();case 3:return t.next=5,this.usb.selectConfiguration(1);case 5:return t.next=7,this.usb.claimInterface(0);case 7:return t.next=9,this.enable();case 9:return t.next=11,this.setBaud(this.baud);case 11:return t.next=13,this.setFlowControl(this.flowControl);case 13:this.setTimers(),this.connectOK&&this.connectOK(),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),this.connectFail&&this.connectFail();case 20:case"end":return t.stop()}},t,this,[[0,17]])}));return function(){return t.apply(this,arguments)}}()},{key:"enable",value:function(){var t=(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.controlTransferOut({requestType:"vendor",recipient:"device",request:s,index:0,value:1});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setTimers",value:function(){void 0!==this.dataTimer&&clearInterval(this.dataTimer),this.dataTimer=setInterval(this.readTimer.bind(this),1),this.canRead=!0,void 0!==this.modemStateTimer&&clearInterval(this.modemStateTimer),this.modemStateTimer=setInterval(this.getModemState.bind(this,this.usb),1)}},{key:"disconnect",value:function(){var t=(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return clearInterval(this.dataTimer),clearInterval(this.modemStateTimer),t.next=4,this.usb.close();case 4:this.disconnectOK&&this.disconnectOK();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"updateModemState",value:function(t){this.modemState=t,this.DTR=(t&v.DTR)>0?1:0,this.RTS=(t&v.RTS)>0?1:0,this.CTS=(t&v.CTS)>0?1:0,this.DSR=(t&v.DSR)>0?1:0,this.RI=(t&v.RI)>0?1:0,this.DCD=(t&v.DCD)>0?1:0}},{key:"setBaud",value:function(){var t=(0,o.default)(i.default.mark(function t(e){var r,n,o;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(this.baud=e,r=[0,0,0,0],n=0;n<r.length;n++)o=255&e,r[n]=o,e=(e-o)/256;return t.next=5,this.usb.controlTransferOut({requestType:"vendor",recipient:"device",request:p,index:0,value:0},new Uint8Array(r));case 5:this.baudChangeOK&&this.baudChangeOK(this.baud);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"initializeSpecialCharacters",value:function(){var t=(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.setChar(g.index,g.value),this.setChar(m.index,m.value);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setChar",value:function(){var t=(0,o.default)(i.default.mark(function t(e,r){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.controlTransferOut({requestType:"vendor",recipient:"device",request:h,index:0,value:e<<8&65280|r});case 2:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"setMHS",value:function(){var t=(0,o.default)(i.default.mark(function t(e){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.controlTransferOut({requestType:"vendor",recipient:"device",request:f,index:0,value:768|e});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getBaud",value:function(){var t=(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.controlTransferIn({requestType:"vendor",recipient:"device",request:c,index:0,value:0},1);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getModemState",value:function(){var t=(0,o.default)(i.default.mark(function t(){var e;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.controlTransferIn({requestType:"vendor",recipient:"device",request:l,index:0,value:0},1);case 2:(e=(e=t.sent).data.getInt8())!==this.modemState&&(this.updateModemState(e),this.modemStateChanged&&this.modemStateChanged(this.DTR,this.RTS,this.CTS,this.DSR,this.RI,this.DCD));case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getFlowControl",value:function(){var t=(0,o.default)(i.default.mark(function t(){var e,r,n,o;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.controlTransferIn({requestType:"vendor",recipient:"device",request:d,index:0,value:0},16);case 2:for(e=t.sent,r=new Int32Array(e.data.buffer),r=JSON.stringify(Array.from(r)),n=Object.entries(y),o=0;o<n.length;o++)JSON.stringify(n[o][1])===r&&this.getFlowControlCallback&&this.getFlowControlCallback(n[o][0]);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setFlowControl",value:function(){var t=(0,o.default)(i.default.mark(function t(e){var r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=y[e],t.next=3,this.usb.controlTransferOut({requestType:"vendor",recipient:"device",request:19,index:0,value:0},new Int32Array(r));case 3:this.flowControlChanged&&this.flowControlChanged(e);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"write",value:function(){var t=(0,o.default)(i.default.mark(function t(e){var r,n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(new Uint8Array,n=new TextEncoder,!((r=n.encode(e)).length>0)){t.next=7;break}return t.next=6,this.usb.transferOut(2,r);case 6:this.serDataSent&&this.serDataSent(e);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"toggleLINE",value:function(){var t=(0,o.default)(i.default.mark(function t(e){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setMHS(e^this.modemState);case 2:console.log("Line toggled");case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"read",value:function(){var t=(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:""!==x&&(this.serDataArrival(x),x="");case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"autoRead",value:function(){var t=(0,o.default)(i.default.mark(function t(){var e;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.transferIn(2,64);case 2:return e=t.sent,t.abrupt("return",new Uint8Array(e.data.buffer));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"readTimer",value:function(){var t=(0,o.default)(i.default.mark(function t(){var e;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.canRead||null==this.usb){t.next=13;break}return this.canRead=!1,t.prev=2,t.next=5,this.autoRead();case 5:(e=t.sent)&&void 0!==this.serDataArrival&&(this.autoReadData?this.serDataArrival(w.decode(e)):x+=w.decode(e)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),"NotFoundError"===t.t0.name&&8===t.t0.code&&t.t0.message.indexOf("disconnected")>=0&&(clearInterval(this.dataTimer),clearInterval(this.modemStateTimer),this.connectionError&&this.connectionError());case 12:this.canRead=!0;case 13:case"end":return t.stop()}},t,this,[[2,9]])}));return function(){return t.apply(this,arguments)}}()}]),t}();t.exports={Serial:b,LINE_STATES:v,FLOW_CONTROL:y}},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e,r){t.exports=r(3)},function(t,e,r){var n=function(){return this}()||Function("return this")(),i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(4),i)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag",c="object"==typeof t,f=e.regeneratorRuntime;if(f)c&&(t.exports=f);else{(f=e.regeneratorRuntime=c?t.exports:{}).wrap=x;var l="suspendedStart",h="suspendedYield",d="executing",p="completed",v={},y={};y[a]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(_([])));g&&g!==n&&i.call(g,a)&&(y=g);var w=k.prototype=T.prototype=Object.create(y);S.prototype=w.constructor=k,k.constructor=S,k[s]=S.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(w),t},f.awrap=function(t){return{__await:t}},O(C.prototype),C.prototype[u]=function(){return this},f.AsyncIterator=C,f.async=function(t,e,r,n){var i=new C(x(t,e,r,n));return f.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},O(w),w[s]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},f.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(D),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return u.type="throw",u.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;D(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}}}function x(t,e,r,n){var i=e&&e.prototype instanceof T?e:T,o=Object.create(i.prototype),a=new E(n||[]);return o._invoke=function(t,e,r){var n=l;return function(i,o){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return I()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=R(a,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var s=b(t,e,r);if("normal"===s.type){if(n=r.done?p:h,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=p,r.method="throw",r.arg=s.arg)}}}(t,r,a),o}function b(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function T(){}function S(){}function k(){}function O(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function C(t){var e;this._invoke=function(r,n){function o(){return new Promise(function(e,o){!function e(r,n,o,a){var u=b(t[r],t,n);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(c).then(function(t){s.value=t,o(s)},a)}a(u.arg)}(r,n,e,o)})}return e=e?e.then(o,o):o()}}function R(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,R(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=b(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function _(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e){function r(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var a=t.apply(e,n);function u(t){r(a,i,o,u,s,"next",t)}function s(t){r(a,i,o,u,s,"throw",t)}u(void 0)})}}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9UaWJib1dlYlNlcmlhbC93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vVGliYm9XZWJTZXJpYWwvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVGliYm9XZWJTZXJpYWwvLi9zcmMvU2VyaWFsLmpzIiwid2VicGFjazovL1RpYmJvV2ViU2VyaWFsLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIiwid2VicGFjazovL1RpYmJvV2ViU2VyaWFsLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIiwid2VicGFjazovL1RpYmJvV2ViU2VyaWFsLy4vbm9kZV9tb2R1bGVzL3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS1tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vVGliYm9XZWJTZXJpYWwvLi9ub2RlX21vZHVsZXMvcmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovL1RpYmJvV2ViU2VyaWFsLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly9UaWJib1dlYlNlcmlhbC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzIiwid2VicGFjazovL1RpYmJvV2ViU2VyaWFsLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsInRoaXMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQ09OVFJPTF9DT01NQU5EUyIsIkxJTkVfU1RBVEVTIiwiRFRSIiwiUlRTIiwiQ1RTIiwiRFNSIiwiUkkiLCJEQ0QiLCJGTE9XX0NPTlRST0wiLCJPRkYiLCJDVFNfUlRTIiwiWE9OX1hPRkYiLCJTUEVDSUFMX0NIQVJBQ1RFUlMiLCJpbmRleCIsIkRFQyIsIlRleHREZWNvZGVyIiwiYnVmZmVyZWREYXRhIiwiU2VyaWFsIiwiZGV2aWNlIiwib3B0aW9ucyIsIl9jbGFzc0NhbGxDaGVjazIiLCJkZWZhdWx0IiwidXNiIiwicmVxdWVzdFRpbWVkT3V0IiwibW9kZW1TdGF0ZSIsIm1vZGVtU3RhdGVDaGFuZ2VkIiwidW5kZWZpbmVkIiwiZ2V0Rmxvd0NvbnRyb2xDYWxsYmFjayIsImZsb3dDb250cm9sQ2hhbmdlZCIsImJhdWRDaGFuZ2VPSyIsInNlckRhdGFBcnJpdmFsIiwic2VyRGF0YVNlbnQiLCJjb25uZWN0RmFpbCIsImNvbm5lY3RPSyIsImRpc2Nvbm5lY3RPSyIsImNvbm5lY3Rpb25FcnJvciIsImF1dG9SZWFkRGF0YSIsImZsb3dDb250cm9sIiwiYmF1ZCIsIm9wZW4iLCJzZWxlY3RDb25maWd1cmF0aW9uIiwiY2xhaW1JbnRlcmZhY2UiLCJlbmFibGUiLCJzZXRCYXVkIiwic2V0Rmxvd0NvbnRyb2wiLCJzZXRUaW1lcnMiLCJjb250cm9sVHJhbnNmZXJPdXQiLCJyZXF1ZXN0VHlwZSIsInJlY2lwaWVudCIsInJlcXVlc3QiLCJkYXRhVGltZXIiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJyZWFkVGltZXIiLCJjYW5SZWFkIiwibW9kZW1TdGF0ZVRpbWVyIiwiZ2V0TW9kZW1TdGF0ZSIsImNsb3NlIiwiYXJyIiwibGVuZ3RoIiwiYnl0ZSIsIlVpbnQ4QXJyYXkiLCJzZXRDaGFyIiwiU3BlY2lhbENoYXJhY3RlckluZGV4IiwiU3BlY2lhbENoYXJhY3RlclZhbHVlIiwiY29udHJvbFRyYW5zZmVySW4iLCJyZXN1bHQiLCJkYXRhIiwiZ2V0SW50OCIsInVwZGF0ZU1vZGVtU3RhdGUiLCJJbnQzMkFycmF5IiwiYnVmZmVyIiwiSlNPTiIsInN0cmluZ2lmeSIsIkFycmF5IiwiZnJvbSIsImVudHJpZXMiLCJlbmMiLCJUZXh0RW5jb2RlciIsImEiLCJlbmNvZGUiLCJ0cmFuc2Zlck91dCIsImxpbmUiLCJzZXRNSFMiLCJjb25zb2xlIiwibG9nIiwidHJhbnNmZXJJbiIsImF1dG9SZWFkIiwiZGVjb2RlIiwiX2NvbnRleHQxNiIsInQwIiwiY29kZSIsIm1lc3NhZ2UiLCJpbmRleE9mIiwib2JqIiwiZyIsIkZ1bmN0aW9uIiwiaGFkUnVudGltZSIsInJlZ2VuZXJhdG9yUnVudGltZSIsImdldE93blByb3BlcnR5TmFtZXMiLCJvbGRSdW50aW1lIiwiZSIsImdsb2JhbCIsIk9wIiwiaGFzT3duIiwiJFN5bWJvbCIsIml0ZXJhdG9yU3ltYm9sIiwiaXRlcmF0b3IiLCJhc3luY0l0ZXJhdG9yU3ltYm9sIiwiYXN5bmNJdGVyYXRvciIsInRvU3RyaW5nVGFnU3ltYm9sIiwiaW5Nb2R1bGUiLCJydW50aW1lIiwid3JhcCIsIkdlblN0YXRlU3VzcGVuZGVkU3RhcnQiLCJHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkIiwiR2VuU3RhdGVFeGVjdXRpbmciLCJHZW5TdGF0ZUNvbXBsZXRlZCIsIkNvbnRpbnVlU2VudGluZWwiLCJJdGVyYXRvclByb3RvdHlwZSIsImdldFByb3RvIiwiZ2V0UHJvdG90eXBlT2YiLCJOYXRpdmVJdGVyYXRvclByb3RvdHlwZSIsInZhbHVlcyIsIkdwIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJHZW5lcmF0b3IiLCJHZW5lcmF0b3JGdW5jdGlvbiIsImNvbnN0cnVjdG9yIiwiZGlzcGxheU5hbWUiLCJpc0dlbmVyYXRvckZ1bmN0aW9uIiwiZ2VuRnVuIiwiY3RvciIsIm1hcmsiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImF3cmFwIiwiYXJnIiwiX19hd2FpdCIsImRlZmluZUl0ZXJhdG9yTWV0aG9kcyIsIkFzeW5jSXRlcmF0b3IiLCJhc3luYyIsImlubmVyRm4iLCJvdXRlckZuIiwidHJ5TG9jc0xpc3QiLCJpdGVyIiwibmV4dCIsInRoZW4iLCJkb25lIiwidG9TdHJpbmciLCJrZXlzIiwicHVzaCIsInJldmVyc2UiLCJwb3AiLCJDb250ZXh0IiwicmVzZXQiLCJza2lwVGVtcFJlc2V0IiwicHJldiIsInNlbnQiLCJfc2VudCIsImRlbGVnYXRlIiwibWV0aG9kIiwidHJ5RW50cmllcyIsImZvckVhY2giLCJyZXNldFRyeUVudHJ5IiwiY2hhckF0IiwiaXNOYU4iLCJzbGljZSIsInN0b3AiLCJyb290UmVjb3JkIiwiY29tcGxldGlvbiIsInR5cGUiLCJydmFsIiwiZGlzcGF0Y2hFeGNlcHRpb24iLCJleGNlcHRpb24iLCJjb250ZXh0IiwiaGFuZGxlIiwibG9jIiwiY2F1Z2h0IiwicmVjb3JkIiwiZW50cnkiLCJ0cnlMb2MiLCJoYXNDYXRjaCIsImhhc0ZpbmFsbHkiLCJjYXRjaExvYyIsImZpbmFsbHlMb2MiLCJFcnJvciIsImFicnVwdCIsImZpbmFsbHlFbnRyeSIsImNvbXBsZXRlIiwiYWZ0ZXJMb2MiLCJmaW5pc2giLCJjYXRjaCIsInRocm93biIsImRlbGVnYXRlWWllbGQiLCJpdGVyYWJsZSIsInJlc3VsdE5hbWUiLCJuZXh0TG9jIiwicHJvdG9HZW5lcmF0b3IiLCJnZW5lcmF0b3IiLCJfaW52b2tlIiwic3RhdGUiLCJkb25lUmVzdWx0IiwiZGVsZWdhdGVSZXN1bHQiLCJtYXliZUludm9rZURlbGVnYXRlIiwidHJ5Q2F0Y2giLCJtYWtlSW52b2tlTWV0aG9kIiwiZm4iLCJlcnIiLCJwcmV2aW91c1Byb21pc2UiLCJjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiaW52b2tlIiwidW53cmFwcGVkIiwicmV0dXJuIiwiVHlwZUVycm9yIiwiaW5mbyIsInB1c2hUcnlFbnRyeSIsImxvY3MiLCJpdGVyYXRvck1ldGhvZCIsImFzeW5jR2VuZXJhdG9yU3RlcCIsImdlbiIsIl9uZXh0IiwiX3Rocm93IiwiZXJyb3IiLCJhcmdzIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiX2RlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsSUFDQSxtQkFBQUcsZUFBQUMsSUFDQUQsT0FBQSxvQkFBQUgsR0FDQSxpQkFBQUMsUUFDQUEsUUFBQSxlQUFBRCxJQUVBRCxFQUFBLGVBQUFDLElBUkEsQ0FTQyxvQkFBQUssVUFBQUMsS0FBQSxXQUNELG1CQ1RBLElBQUFDLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQVIsUUFHQSxJQUFBQyxFQUFBSyxFQUFBRSxHQUFBLENBQ0FDLEVBQUFELEVBQ0FFLEdBQUEsRUFDQVYsUUFBQSxJQVVBLE9BTkFXLEVBQUFILEdBQUFJLEtBQUFYLEVBQUFELFFBQUFDLElBQUFELFFBQUFPLEdBR0FOLEVBQUFTLEdBQUEsRUFHQVQsRUFBQUQsUUEwREEsT0FyREFPLEVBQUFNLEVBQUFGLEVBR0FKLEVBQUFPLEVBQUFSLEVBR0FDLEVBQUFRLEVBQUEsU0FBQWYsRUFBQWdCLEVBQUFDLEdBQ0FWLEVBQUFXLEVBQUFsQixFQUFBZ0IsSUFD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YUFBQUMsR0FDQSxVQUFBZCxVQUFBLHFEQ0ZBLFNBQUFlLEVBQUFDLEVBQUFDLEdBQ0EsUUFBQTFRLEVBQUEsRUFBaUJBLEVBQUEwUSxFQUFBL0ssT0FBa0IzRixJQUFBLENBQ25DLElBQUEyUSxFQUFBRCxFQUFBMVEsR0FDQTJRLEVBQUEvUCxXQUFBK1AsRUFBQS9QLGFBQUEsRUFDQStQLEVBQUFDLGNBQUEsRUFDQSxVQUFBRCxNQUFBRSxVQUFBLEdBQ0FuUSxPQUFBQyxlQUFBOFAsRUFBQUUsRUFBQXBQLElBQUFvUCxJQVVBblIsRUFBQUQsUUFOQSxTQUFBZ1IsRUFBQU8sRUFBQUMsR0FHQSxPQUZBRCxHQUFBTixFQUFBRCxFQUFBM08sVUFBQWtQLEdBQ0FDLEdBQUFQLEVBQUFELEVBQUFRLEdBQ0FSIiwiZmlsZSI6IlRpYmJvV2ViU2VyaWFsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiVGliYm9XZWJTZXJpYWxcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiVGliYm9XZWJTZXJpYWxcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiVGliYm9XZWJTZXJpYWxcIl0gPSBmYWN0b3J5KCk7XG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiY29uc3QgQ09OVFJPTF9DT01NQU5EUyA9IHtcclxuICAgIElGQ19FTkFCTEU6IDB4MDAsXHJcbiAgICBTRVRfQkFVRERJVjogMHgwMSxcclxuICAgIEdFVF9CQVVERElWOiAweDAyLFxyXG4gICAgU0VUX0xJTkVfQ1RMOiAweDAzLFxyXG4gICAgR0VUX0xJTkVfQ1RMOiAweDA0LFxyXG4gICAgU0VUX0JSRUFLOiAweDA1LFxyXG4gICAgSU1NX0NIQVI6IDB4MDYsXHJcbiAgICBTRVRfTUhTOiAweDA3LFxyXG4gICAgR0VUX01ETVNUUzogMHgwOCxcclxuICAgIFNFVF9YT046IDB4MDksXHJcbiAgICBTRVRfWE9GRjogMHgwQSxcclxuICAgIFNFVF9FVkVOVE1BU0s6IDB4MEIsXHJcbiAgICBHRVRfRVZFTlRNQVNLOiAweDBDLFxyXG4gICAgR0VUX0VWRU5UU1RBVEU6IDB4MTYsXHJcbiAgICBTRVRfQ0hBUjogMHgwRCxcclxuICAgIEdFVF9DSEFSUzogMHgwRSxcclxuICAgIEdFVF9QUk9QUzogMHgwRixcclxuICAgIEdFVF9DT01NX1NUQVRVUzogMHgxMCxcclxuICAgIFJFU0VUOiAweDExLFxyXG4gICAgUFVSR0U6IDB4MTIsXHJcbiAgICBTRVRfRkxPVzogMHgxMyxcclxuICAgIEdFVF9GTE9XOiAweDE0LFxyXG4gICAgRU1CRURfRVZFTlRTOiAweDE1LFxyXG4gICAgR0VUX0JBVURSQVRFOiAweDFELFxyXG4gICAgU0VUX0JBVURSQVRFOiAweDFFLFxyXG4gICAgU0VUX0NIQVJTOiAweDE5LFxyXG4gICAgVkVORE9SX1NQRUNJRklDOiAweEZGXHJcbn07XHJcblxyXG5jb25zdCBMSU5FX1NUQVRFUyA9IHtcclxuICAgIERUUjogMSxcclxuICAgIFJUUzogMixcclxuICAgIENUUzogMTYsXHJcbiAgICBEU1I6IDMyLFxyXG4gICAgUkk6IDY0LFxyXG4gICAgRENEOiAxMjhcclxufTtcclxuXHJcbmNvbnN0IEZMT1dfQ09OVFJPTCA9IHtcclxuICAgIE9GRjogWzAsIDAsIDAsIDBdLFxyXG4gICAgQ1RTX1JUUzogWzgsIDE0NCwgMCwgMF0sXHJcbiAgICBYT05fWE9GRjogWzAsIDE5LCA0MDAsIDQwMF1cclxufTtcclxuXHJcbmNvbnN0IFNQRUNJQUxfQ0hBUkFDVEVSUyA9IHtcclxuICAgIEVPRkNIQVI6IHsgaW5kZXg6IDAsIHZhbHVlOiAwIH0sXHJcbiAgICBFUlJPUkNIQVI6IHsgaW5kZXg6IDEsIHZhbHVlOiAwIH0sXHJcbiAgICBCUkVBS0NIQVI6IHsgaW5kZXg6IDIsIHZhbHVlOiAwIH0sXHJcbiAgICBFVkVOVENIQVI6IHsgaW5kZXg6IDMsIHZhbHVlOiAwIH0sXHJcbiAgICBYT05DSEFSOiB7IGluZGV4OiA0LCB2YWx1ZTogMTcgfSxcclxuICAgIFhPRkZDSEFSOiB7IGluZGV4OiA1LCB2YWx1ZTogMTkgfVxyXG59O1xyXG5cclxuY29uc3QgREVDID0gbmV3IFRleHREZWNvZGVyKCk7XHJcblxyXG5sZXQgYnVmZmVyZWREYXRhID0gJyc7XHJcblxyXG5jbGFzcyBTZXJpYWwge1xyXG4gICAgY29uc3RydWN0b3IoZGV2aWNlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy51c2IgPSBkZXZpY2U7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0VGltZWRPdXQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm1vZGVtU3RhdGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuRFRSID0gbnVsbDtcclxuICAgICAgICB0aGlzLlJUUyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5DVFMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuRFNSID0gbnVsbDtcclxuICAgICAgICB0aGlzLlJJID0gbnVsbDtcclxuICAgICAgICB0aGlzLkRDRCA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMubW9kZW1TdGF0ZUNoYW5nZWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5nZXRGbG93Q29udHJvbENhbGxiYWNrID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuZmxvd0NvbnRyb2xDaGFuZ2VkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuYmF1ZENoYW5nZU9LID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuc2VyRGF0YUFycml2YWwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5zZXJEYXRhU2VudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmNvbm5lY3RGYWlsID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdE9LID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuZGlzY29ubmVjdE9LID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuYXV0b1JlYWREYXRhID0gb3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMuYXV0b1JlYWREYXRhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmF1dG9SZWFkRGF0YSA6IHRydWU7XHJcbiAgICAgICAgdGhpcy5mbG93Q29udHJvbCA9IG9wdGlvbnMgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmZsb3dDb250cm9sICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmZsb3dDb250cm9sIDogJ09GRic7XHJcbiAgICAgICAgdGhpcy5iYXVkID0gb3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMuYmF1ZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5iYXVkIDogMzg0MDA7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY29ubmVjdCgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVzYi5vcGVuKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNiLnNlbGVjdENvbmZpZ3VyYXRpb24oMSk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNiLmNsYWltSW50ZXJmYWNlKDApO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmVuYWJsZSgpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldEJhdWQodGhpcy5iYXVkKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRGbG93Q29udHJvbCh0aGlzLmZsb3dDb250cm9sKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRUaW1lcnMoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdE9LKSB0aGlzLmNvbm5lY3RPSygpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RGYWlsKSB0aGlzLmNvbm5lY3RGYWlsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGVuYWJsZSgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnVzYi5jb250cm9sVHJhbnNmZXJPdXQoe1xyXG4gICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3ZlbmRvcicsXHJcbiAgICAgICAgICAgIHJlY2lwaWVudDogJ2RldmljZScsXHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IENPTlRST0xfQ09NTUFORFMuSUZDX0VOQUJMRSxcclxuICAgICAgICAgICAgaW5kZXg6IDB4MDAsXHJcbiAgICAgICAgICAgIHZhbHVlOiAweDAxXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGltZXJzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGFUaW1lciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5kYXRhVGltZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGFUaW1lciA9IHNldEludGVydmFsKHRoaXMucmVhZFRpbWVyLmJpbmQodGhpcyksIDEpO1xyXG4gICAgICAgIHRoaXMuY2FuUmVhZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZW1TdGF0ZVRpbWVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLm1vZGVtU3RhdGVUaW1lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubW9kZW1TdGF0ZVRpbWVyID0gc2V0SW50ZXJ2YWwodGhpcy5nZXRNb2RlbVN0YXRlLmJpbmQodGhpcywgdGhpcy51c2IpLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkaXNjb25uZWN0KCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5kYXRhVGltZXIpO1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5tb2RlbVN0YXRlVGltZXIpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMudXNiLmNsb3NlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzY29ubmVjdE9LKSB0aGlzLmRpc2Nvbm5lY3RPSygpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZU1vZGVtU3RhdGUobW9kZW1TdGF0ZSkge1xyXG4gICAgICAgIHRoaXMubW9kZW1TdGF0ZSA9IG1vZGVtU3RhdGU7XHJcbiAgICAgICAgdGhpcy5EVFIgPSAobW9kZW1TdGF0ZSAmIExJTkVfU1RBVEVTLkRUUikgPiAwID8gMSA6IDA7XHJcbiAgICAgICAgdGhpcy5SVFMgPSAobW9kZW1TdGF0ZSAmIExJTkVfU1RBVEVTLlJUUykgPiAwID8gMSA6IDA7XHJcbiAgICAgICAgdGhpcy5DVFMgPSAobW9kZW1TdGF0ZSAmIExJTkVfU1RBVEVTLkNUUykgPiAwID8gMSA6IDA7XHJcbiAgICAgICAgdGhpcy5EU1IgPSAobW9kZW1TdGF0ZSAmIExJTkVfU1RBVEVTLkRTUikgPiAwID8gMSA6IDA7XHJcbiAgICAgICAgdGhpcy5SSSA9IChtb2RlbVN0YXRlICYgTElORV9TVEFURVMuUkkpID4gMCA/IDEgOiAwO1xyXG4gICAgICAgIHRoaXMuRENEID0gKG1vZGVtU3RhdGUgJiBMSU5FX1NUQVRFUy5EQ0QpID4gMCA/IDEgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNldEJhdWQoYmF1ZCkge1xyXG4gICAgICAgIHRoaXMuYmF1ZCA9IGJhdWQ7XHJcbiAgICAgICAgbGV0IGFyciA9IFswLCAwLCAwLCAwXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgYnl0ZSA9IGJhdWQgJiAweGZmO1xyXG4gICAgICAgICAgICBhcnJbaV0gPSBieXRlO1xyXG4gICAgICAgICAgICBiYXVkID0gKGJhdWQgLSBieXRlKSAvIDI1NjtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2IuY29udHJvbFRyYW5zZmVyT3V0KHtcclxuICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICd2ZW5kb3InLFxyXG4gICAgICAgICAgICByZWNpcGllbnQ6ICdkZXZpY2UnLFxyXG4gICAgICAgICAgICByZXF1ZXN0OiBDT05UUk9MX0NPTU1BTkRTLlNFVF9CQVVEUkFURSxcclxuICAgICAgICAgICAgaW5kZXg6IDB4MDAsXHJcbiAgICAgICAgICAgIHZhbHVlOiAwXHJcbiAgICAgICAgfSwgbmV3IFVpbnQ4QXJyYXkoYXJyKSk7XHJcbiAgICAgICAgaWYgKHRoaXMuYmF1ZENoYW5nZU9LKSB0aGlzLmJhdWRDaGFuZ2VPSyh0aGlzLmJhdWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGluaXRpYWxpemVTcGVjaWFsQ2hhcmFjdGVycygpIHtcclxuICAgICAgICB0aGlzLnNldENoYXIoU1BFQ0lBTF9DSEFSQUNURVJTLlhPRkZDSEFSLmluZGV4LCBTUEVDSUFMX0NIQVJBQ1RFUlMuWE9GRkNIQVIudmFsdWUpO1xyXG4gICAgICAgIHRoaXMuc2V0Q2hhcihTUEVDSUFMX0NIQVJBQ1RFUlMuWE9OQ0hBUi5pbmRleCwgU1BFQ0lBTF9DSEFSQUNURVJTLlhPTkNIQVIudmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNldENoYXIoU3BlY2lhbENoYXJhY3RlckluZGV4LCBTcGVjaWFsQ2hhcmFjdGVyVmFsdWUpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnVzYi5jb250cm9sVHJhbnNmZXJPdXQoe1xyXG4gICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3ZlbmRvcicsXHJcbiAgICAgICAgICAgIHJlY2lwaWVudDogJ2RldmljZScsXHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IENPTlRST0xfQ09NTUFORFMuU0VUX0NIQVIsXHJcbiAgICAgICAgICAgIGluZGV4OiAweDAwLFxyXG4gICAgICAgICAgICB2YWx1ZTogKChTcGVjaWFsQ2hhcmFjdGVySW5kZXggPDwgOCkgJiAweEZGMDApIHwgU3BlY2lhbENoYXJhY3RlclZhbHVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2V0TUhTKHZhbHVlKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2IuY29udHJvbFRyYW5zZmVyT3V0KHtcclxuICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICd2ZW5kb3InLFxyXG4gICAgICAgICAgICByZWNpcGllbnQ6ICdkZXZpY2UnLFxyXG4gICAgICAgICAgICByZXF1ZXN0OiBDT05UUk9MX0NPTU1BTkRTLlNFVF9NSFMsXHJcbiAgICAgICAgICAgIGluZGV4OiAweDAwLFxyXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUgfCAweDIwMCB8IDB4MTAwXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0QmF1ZCgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnVzYi5jb250cm9sVHJhbnNmZXJJbih7XHJcbiAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAndmVuZG9yJyxcclxuICAgICAgICAgICAgcmVjaXBpZW50OiAnZGV2aWNlJyxcclxuICAgICAgICAgICAgcmVxdWVzdDogQ09OVFJPTF9DT01NQU5EUy5TRVRfQkFVRERJVixcclxuICAgICAgICAgICAgaW5kZXg6IDB4MDAsXHJcbiAgICAgICAgICAgIHZhbHVlOiAweDBcclxuICAgICAgICB9LCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRNb2RlbVN0YXRlKCkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLnVzYi5jb250cm9sVHJhbnNmZXJJbih7XHJcbiAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAndmVuZG9yJyxcclxuICAgICAgICAgICAgcmVjaXBpZW50OiAnZGV2aWNlJyxcclxuICAgICAgICAgICAgcmVxdWVzdDogQ09OVFJPTF9DT01NQU5EUy5HRVRfTURNU1RTLFxyXG4gICAgICAgICAgICBpbmRleDogMHgwMCxcclxuICAgICAgICAgICAgdmFsdWU6IDB4MFxyXG4gICAgICAgIH0sIDEpO1xyXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5kYXRhLmdldEludDgoKTtcclxuICAgICAgICBpZiAocmVzdWx0ICE9PSB0aGlzLm1vZGVtU3RhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbVN0YXRlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGVtU3RhdGVDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVtU3RhdGVDaGFuZ2VkKHRoaXMuRFRSLCB0aGlzLlJUUywgdGhpcy5DVFMsIHRoaXMuRFNSLCB0aGlzLlJJLCB0aGlzLkRDRCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0Rmxvd0NvbnRyb2woKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMudXNiLmNvbnRyb2xUcmFuc2ZlckluKHtcclxuICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICd2ZW5kb3InLFxyXG4gICAgICAgICAgICByZWNpcGllbnQ6ICdkZXZpY2UnLFxyXG4gICAgICAgICAgICByZXF1ZXN0OiBDT05UUk9MX0NPTU1BTkRTLkdFVF9GTE9XLFxyXG4gICAgICAgICAgICBpbmRleDogMHgwMCxcclxuICAgICAgICAgICAgdmFsdWU6IDB4MFxyXG4gICAgICAgIH0sIDE2KTtcclxuICAgICAgICB2YXIgYXJyID0gbmV3IEludDMyQXJyYXkocmVzdWx0LmRhdGEuYnVmZmVyKTtcclxuICAgICAgICBhcnIgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKGFycikpO1xyXG4gICAgICAgIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhGTE9XX0NPTlRST0wpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW50cmllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZW50cmllc1tpXVsxXSkgPT09IGFycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0Rmxvd0NvbnRyb2xDYWxsYmFjaykgdGhpcy5nZXRGbG93Q29udHJvbENhbGxiYWNrKGVudHJpZXNbaV1bMF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNldEZsb3dDb250cm9sKHZhbHVlKSB7XHJcbiAgICAgICAgbGV0IGFyciA9IEZMT1dfQ09OVFJPTFt2YWx1ZV07XHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2IuY29udHJvbFRyYW5zZmVyT3V0KHtcclxuICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICd2ZW5kb3InLFxyXG4gICAgICAgICAgICByZWNpcGllbnQ6ICdkZXZpY2UnLFxyXG4gICAgICAgICAgICByZXF1ZXN0OiAweDEzLFxyXG4gICAgICAgICAgICBpbmRleDogMHgwMCxcclxuICAgICAgICAgICAgdmFsdWU6IDB4MFxyXG4gICAgICAgIH0sIG5ldyBJbnQzMkFycmF5KGFycikpO1xyXG4gICAgICAgIGlmICh0aGlzLmZsb3dDb250cm9sQ2hhbmdlZCkgdGhpcy5mbG93Q29udHJvbENoYW5nZWQodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHdyaXRlKGRhdGEpIHtcclxuICAgICAgICB2YXIgYSA9IG5ldyBVaW50OEFycmF5KCk7XHJcbiAgICAgICAgdmFyIGVuYyA9IG5ldyBUZXh0RW5jb2RlcigpO1xyXG4gICAgICAgIGEgPSBlbmMuZW5jb2RlKGRhdGEpO1xyXG4gICAgICAgIGlmIChhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51c2IudHJhbnNmZXJPdXQoMiwgYSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlckRhdGFTZW50KSB0aGlzLnNlckRhdGFTZW50KGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB0b2dnbGVMSU5FKGxpbmUpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNldE1IUyhsaW5lIF4gdGhpcy5tb2RlbVN0YXRlKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnTGluZSB0b2dnbGVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVhZCgpIHtcclxuICAgICAgICBpZiAoYnVmZmVyZWREYXRhICE9PSAnJykge1xyXG4gICAgICAgICAgICB0aGlzLnNlckRhdGFBcnJpdmFsKGJ1ZmZlcmVkRGF0YSk7XHJcbiAgICAgICAgICAgIGJ1ZmZlcmVkRGF0YSA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBhdXRvUmVhZCgpIHtcclxuICAgICAgICBjb25zdCByID0gYXdhaXQgdGhpcy51c2IudHJhbnNmZXJJbigyLCA2NCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHIuZGF0YS5idWZmZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlYWRUaW1lcigpIHtcclxuICAgICAgICBpZiAodGhpcy5jYW5SZWFkICYmIHRoaXMudXNiICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW5SZWFkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IGF3YWl0IHRoaXMuYXV0b1JlYWQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VyRGF0YUFycml2YWwgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRvUmVhZERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VyRGF0YUFycml2YWwoREVDLmRlY29kZShkYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJlZERhdGEgPSBidWZmZXJlZERhdGEgKyBERUMuZGVjb2RlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4Lm5hbWUgPT09ICdOb3RGb3VuZEVycm9yJyAmJiBleC5jb2RlID09PSA4ICYmIGV4Lm1lc3NhZ2UuaW5kZXhPZignZGlzY29ubmVjdGVkJykgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5kYXRhVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5tb2RlbVN0YXRlVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25FcnJvcikgdGhpcy5jb25uZWN0aW9uRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNhblJlYWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7IFNlcmlhbCwgTElORV9TVEFURVMsIEZMT1dfQ09OVFJPTCB9O1xyXG4iLCJmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgIFwiZGVmYXVsdFwiOiBvYmpcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0OyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInJlZ2VuZXJhdG9yLXJ1bnRpbWVcIik7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbi8vIFRoaXMgbWV0aG9kIG9mIG9idGFpbmluZyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdCBuZWVkcyB0byBiZVxuLy8ga2VwdCBpZGVudGljYWwgdG8gdGhlIHdheSBpdCBpcyBvYnRhaW5lZCBpbiBydW50aW1lLmpzXG52YXIgZyA9IChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMgfSkoKSB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG5cbi8vIFVzZSBgZ2V0T3duUHJvcGVydHlOYW1lc2AgYmVjYXVzZSBub3QgYWxsIGJyb3dzZXJzIHN1cHBvcnQgY2FsbGluZ1xuLy8gYGhhc093blByb3BlcnR5YCBvbiB0aGUgZ2xvYmFsIGBzZWxmYCBvYmplY3QgaW4gYSB3b3JrZXIuIFNlZSAjMTgzLlxudmFyIGhhZFJ1bnRpbWUgPSBnLnJlZ2VuZXJhdG9yUnVudGltZSAmJlxuICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhnKS5pbmRleE9mKFwicmVnZW5lcmF0b3JSdW50aW1lXCIpID49IDA7XG5cbi8vIFNhdmUgdGhlIG9sZCByZWdlbmVyYXRvclJ1bnRpbWUgaW4gY2FzZSBpdCBuZWVkcyB0byBiZSByZXN0b3JlZCBsYXRlci5cbnZhciBvbGRSdW50aW1lID0gaGFkUnVudGltZSAmJiBnLnJlZ2VuZXJhdG9yUnVudGltZTtcblxuLy8gRm9yY2UgcmVldmFsdXRhdGlvbiBvZiBydW50aW1lLmpzLlxuZy5yZWdlbmVyYXRvclJ1bnRpbWUgPSB1bmRlZmluZWQ7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vcnVudGltZVwiKTtcblxuaWYgKGhhZFJ1bnRpbWUpIHtcbiAgLy8gUmVzdG9yZSB0aGUgb3JpZ2luYWwgcnVudGltZS5cbiAgZy5yZWdlbmVyYXRvclJ1bnRpbWUgPSBvbGRSdW50aW1lO1xufSBlbHNlIHtcbiAgLy8gUmVtb3ZlIHRoZSBnbG9iYWwgcHJvcGVydHkgYWRkZWQgYnkgcnVudGltZS5qcy5cbiAgdHJ5IHtcbiAgICBkZWxldGUgZy5yZWdlbmVyYXRvclJ1bnRpbWU7XG4gIH0gY2F0Y2goZSkge1xuICAgIGcucmVnZW5lcmF0b3JSdW50aW1lID0gdW5kZWZpbmVkO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbiEoZnVuY3Rpb24oZ2xvYmFsKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBPcCA9IE9iamVjdC5wcm90b3R5cGU7XG4gIHZhciBoYXNPd24gPSBPcC5oYXNPd25Qcm9wZXJ0eTtcbiAgdmFyIHVuZGVmaW5lZDsgLy8gTW9yZSBjb21wcmVzc2libGUgdGhhbiB2b2lkIDAuXG4gIHZhciAkU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sIDoge307XG4gIHZhciBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCI7XG4gIHZhciBhc3luY0l0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCI7XG4gIHZhciB0b1N0cmluZ1RhZ1N5bWJvbCA9ICRTeW1ib2wudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG5cbiAgdmFyIGluTW9kdWxlID0gdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIjtcbiAgdmFyIHJ1bnRpbWUgPSBnbG9iYWwucmVnZW5lcmF0b3JSdW50aW1lO1xuICBpZiAocnVudGltZSkge1xuICAgIGlmIChpbk1vZHVsZSkge1xuICAgICAgLy8gSWYgcmVnZW5lcmF0b3JSdW50aW1lIGlzIGRlZmluZWQgZ2xvYmFsbHkgYW5kIHdlJ3JlIGluIGEgbW9kdWxlLFxuICAgICAgLy8gbWFrZSB0aGUgZXhwb3J0cyBvYmplY3QgaWRlbnRpY2FsIHRvIHJlZ2VuZXJhdG9yUnVudGltZS5cbiAgICAgIG1vZHVsZS5leHBvcnRzID0gcnVudGltZTtcbiAgICB9XG4gICAgLy8gRG9uJ3QgYm90aGVyIGV2YWx1YXRpbmcgdGhlIHJlc3Qgb2YgdGhpcyBmaWxlIGlmIHRoZSBydW50aW1lIHdhc1xuICAgIC8vIGFscmVhZHkgZGVmaW5lZCBnbG9iYWxseS5cbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBEZWZpbmUgdGhlIHJ1bnRpbWUgZ2xvYmFsbHkgKGFzIGV4cGVjdGVkIGJ5IGdlbmVyYXRlZCBjb2RlKSBhcyBlaXRoZXJcbiAgLy8gbW9kdWxlLmV4cG9ydHMgKGlmIHdlJ3JlIGluIGEgbW9kdWxlKSBvciBhIG5ldywgZW1wdHkgb2JqZWN0LlxuICBydW50aW1lID0gZ2xvYmFsLnJlZ2VuZXJhdG9yUnVudGltZSA9IGluTW9kdWxlID8gbW9kdWxlLmV4cG9ydHMgOiB7fTtcblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBydW50aW1lLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICAvLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yICVJdGVyYXRvclByb3RvdHlwZSUgZm9yIGVudmlyb25tZW50cyB0aGF0XG4gIC8vIGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBJdGVyYXRvclByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHcC5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZVt0b1N0cmluZ1RhZ1N5bWJvbF0gPVxuICAgIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlXG4gIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG4gIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIHByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIHJ1bnRpbWUuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIHJ1bnRpbWUubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgaWYgKCEodG9TdHJpbmdUYWdTeW1ib2wgaW4gZ2VuRnVuKSkge1xuICAgICAgICBnZW5GdW5bdG9TdHJpbmdUYWdTeW1ib2xdID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuICAgICAgfVxuICAgIH1cbiAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7XG4gICAgcmV0dXJuIGdlbkZ1bjtcbiAgfTtcblxuICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG9cbiAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3RcbiAgLy8gYGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIilgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpc1xuICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLlxuICBydW50aW1lLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHsgX19hd2FpdDogYXJnIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICByZWplY3QocmVjb3JkLmFyZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZztcbiAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGludm9rZShcInRocm93XCIsIGVyciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKSB7XG4gICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXNcbiAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi4gSWYgdGhlIFByb21pc2UgaXMgcmVqZWN0ZWQsIGhvd2V2ZXIsIHRoZVxuICAgICAgICAgIC8vIHJlc3VsdCBmb3IgdGhpcyBpdGVyYXRpb24gd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBzYW1lXG4gICAgICAgICAgLy8gcmVhc29uLiBOb3RlIHRoYXQgcmVqZWN0aW9ucyBvZiB5aWVsZGVkIFByb21pc2VzIGFyZSBub3RcbiAgICAgICAgICAvLyB0aHJvd24gYmFjayBpbnRvIHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24sIGFzIGlzIHRoZSBjYXNlXG4gICAgICAgICAgLy8gd2hlbiBhbiBhd2FpdGVkIFByb21pc2UgaXMgcmVqZWN0ZWQuIFRoaXMgZGlmZmVyZW5jZSBpblxuICAgICAgICAgIC8vIGJlaGF2aW9yIGJldHdlZW4geWllbGQgYW5kIGF3YWl0IGlzIGltcG9ydGFudCwgYmVjYXVzZSBpdFxuICAgICAgICAgIC8vIGFsbG93cyB0aGUgY29uc3VtZXIgdG8gZGVjaWRlIHdoYXQgdG8gZG8gd2l0aCB0aGUgeWllbGRlZFxuICAgICAgICAgIC8vIHJlamVjdGlvbiAoc3dhbGxvdyBpdCBhbmQgY29udGludWUsIG1hbnVhbGx5IC50aHJvdyBpdCBiYWNrXG4gICAgICAgICAgLy8gaW50byB0aGUgZ2VuZXJhdG9yLCBhYmFuZG9uIGl0ZXJhdGlvbiwgd2hhdGV2ZXIpLiBXaXRoXG4gICAgICAgICAgLy8gYXdhaXQsIGJ5IGNvbnRyYXN0LCB0aGVyZSBpcyBubyBvcHBvcnR1bml0eSB0byBleGFtaW5lIHRoZVxuICAgICAgICAgIC8vIHJlamVjdGlvbiByZWFzb24gb3V0c2lkZSB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uLCBzbyB0aGVcbiAgICAgICAgICAvLyBvbmx5IG9wdGlvbiBpcyB0byB0aHJvdyBpdCBmcm9tIHRoZSBhd2FpdCBleHByZXNzaW9uLCBhbmRcbiAgICAgICAgICAvLyBsZXQgdGhlIGdlbmVyYXRvciBmdW5jdGlvbiBoYW5kbGUgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9LCByZWplY3QpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcmV2aW91c1Byb21pc2U7XG5cbiAgICBmdW5jdGlvbiBlbnF1ZXVlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPVxuICAgICAgICAvLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsXG4gICAgICAgIC8vIGFsbCBwcmV2aW91cyBQcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQgYmVmb3JlIGNhbGxpbmcgaW52b2tlLFxuICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmXG4gICAgICAgIC8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvXG4gICAgICAgIC8vIGNhbGwgaW52b2tlIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgb24gYSBjYWxsYmFjayB0byBmaXJlLFxuICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkb1xuICAgICAgICAvLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5XG4gICAgICAgIC8vIGlzIHdoeSB0aGUgUHJvbWlzZSBjb25zdHJ1Y3RvciBzeW5jaHJvbm91c2x5IGludm9rZXMgaXRzXG4gICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlXG4gICAgICAgIC8vIGFzeW5jIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBhc3luYyBnZW5lcmF0b3JzLCBpdCBpcyBlc3BlY2lhbGx5XG4gICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS5cbiAgICAgICAgcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsXG4gICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXJcbiAgICAgICAgICAvLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmdcbiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS5cbiAgICB0aGlzLl9pbnZva2UgPSBlbnF1ZXVlO1xuICB9XG5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKTtcbiAgQXN5bmNJdGVyYXRvci5wcm90b3R5cGVbYXN5bmNJdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIHJ1bnRpbWUuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIHJ1bnRpbWUuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoXG4gICAgICB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KVxuICAgICk7XG5cbiAgICByZXR1cm4gcnVudGltZS5pc0dlbmVyYXRvckZ1bmN0aW9uKG91dGVyRm4pXG4gICAgICA/IGl0ZXIgLy8gSWYgb3V0ZXJGbiBpcyBhIGdlbmVyYXRvciwgcmV0dXJuIHRoZSBmdWxsIGl0ZXJhdG9yLlxuICAgICAgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHJlc3VsdC52YWx1ZSA6IGl0ZXIubmV4dCgpO1xuICAgICAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpIHtcbiAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZykge1xuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUV4ZWN1dGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7XG4gICAgICAgIGlmIChtZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHRocm93IGFyZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJlIGZvcmdpdmluZywgcGVyIDI1LjMuMy4zLjMgb2YgdGhlIHNwZWM6XG4gICAgICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWVcbiAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTtcbiAgICAgIH1cblxuICAgICAgY29udGV4dC5tZXRob2QgPSBtZXRob2Q7XG4gICAgICBjb250ZXh0LmFyZyA9IGFyZztcblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGRlbGVnYXRlID0gY29udGV4dC5kZWxlZ2F0ZTtcbiAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG4gICAgICAgICAgdmFyIGRlbGVnYXRlUmVzdWx0ID0gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG4gICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQgPT09IENvbnRpbnVlU2VudGluZWwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlUmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAvLyBTZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgICAgIGNvbnRleHQuc2VudCA9IGNvbnRleHQuX3NlbnQgPSBjb250ZXh0LmFyZztcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmFyZztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInJldHVyblwiKSB7XG4gICAgICAgICAgY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgY29udGV4dC5hcmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUV4ZWN1dGluZztcblxuICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIikge1xuICAgICAgICAgIC8vIElmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZnJvbSBpbm5lckZuLCB3ZSBsZWF2ZSBzdGF0ZSA9PT1cbiAgICAgICAgICAvLyBHZW5TdGF0ZUV4ZWN1dGluZyBhbmQgbG9vcCBiYWNrIGZvciBhbm90aGVyIGludm9jYXRpb24uXG4gICAgICAgICAgc3RhdGUgPSBjb250ZXh0LmRvbmVcbiAgICAgICAgICAgID8gR2VuU3RhdGVDb21wbGV0ZWRcbiAgICAgICAgICAgIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDtcblxuICAgICAgICAgIGlmIChyZWNvcmQuYXJnID09PSBDb250aW51ZVNlbnRpbmVsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHJlY29yZC5hcmcsXG4gICAgICAgICAgICBkb25lOiBjb250ZXh0LmRvbmVcbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgLy8gRGlzcGF0Y2ggdGhlIGV4Y2VwdGlvbiBieSBsb29waW5nIGJhY2sgYXJvdW5kIHRvIHRoZVxuICAgICAgICAgIC8vIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpIGNhbGwgYWJvdmUuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIENhbGwgZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdKGNvbnRleHQuYXJnKSBhbmQgaGFuZGxlIHRoZVxuICAvLyByZXN1bHQsIGVpdGhlciBieSByZXR1cm5pbmcgYSB7IHZhbHVlLCBkb25lIH0gcmVzdWx0IGZyb20gdGhlXG4gIC8vIGRlbGVnYXRlIGl0ZXJhdG9yLCBvciBieSBtb2RpZnlpbmcgY29udGV4dC5tZXRob2QgYW5kIGNvbnRleHQuYXJnLFxuICAvLyBzZXR0aW5nIGNvbnRleHQuZGVsZWdhdGUgdG8gbnVsbCwgYW5kIHJldHVybmluZyB0aGUgQ29udGludWVTZW50aW5lbC5cbiAgZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBtZXRob2QgPSBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF07XG4gICAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBBIC50aHJvdyBvciAucmV0dXJuIHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyAudGhyb3dcbiAgICAgIC8vIG1ldGhvZCBhbHdheXMgdGVybWluYXRlcyB0aGUgeWllbGQqIGxvb3AuXG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgaWYgKGRlbGVnYXRlLml0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIEdwW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yXCI7XG5cbiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGVcbiAgLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGVcbiAgLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLlxuICBHcFtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBHcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7XG4gICAgdmFyIGVudHJ5ID0geyB0cnlMb2M6IGxvY3NbMF0gfTtcblxuICAgIGlmICgxIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmNhdGNoTG9jID0gbG9jc1sxXTtcbiAgICB9XG5cbiAgICBpZiAoMiBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcbiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTtcbiAgICB9XG5cbiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuICAgIGRlbGV0ZSByZWNvcmQuYXJnO1xuICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG4gICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbVxuICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC5cbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTtcbiAgICB0aGlzLnJlc2V0KHRydWUpO1xuICB9XG5cbiAgcnVudGltZS5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICB9XG4gICAga2V5cy5yZXZlcnNlKCk7XG5cbiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcbiAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcbiAgICAgIC8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzXG4gICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi5cbiAgICAgIG5leHQuZG9uZSA9IHRydWU7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdO1xuICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHtcbiAgICAgICAgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkge1xuICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV07XG4gICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV4dC5uZXh0ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuXG4gICAgcmV0dXJuIHsgbmV4dDogZG9uZVJlc3VsdCB9O1xuICB9XG4gIHJ1bnRpbWUudmFsdWVzID0gdmFsdWVzO1xuXG4gIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICB9XG5cbiAgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG5cbiAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkge1xuICAgICAgdGhpcy5wcmV2ID0gMDtcbiAgICAgIHRoaXMubmV4dCA9IDA7XG4gICAgICAvLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpO1xuXG4gICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7XG4gICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczpcbiAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09IFwidFwiICYmXG4gICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmXG4gICAgICAgICAgICAgICFpc05hTigrbmFtZS5zbGljZSgxKSkpIHtcbiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblxuICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTtcbiAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247XG4gICAgICBpZiAocm9vdFJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcm9vdFJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJ2YWw7XG4gICAgfSxcblxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHtcbiAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBoYW5kbGUobG9jLCBjYXVnaHQpIHtcbiAgICAgICAgcmVjb3JkLnR5cGUgPSBcInRocm93XCI7XG4gICAgICAgIHJlY29yZC5hcmcgPSBleGNlcHRpb247XG4gICAgICAgIGNvbnRleHQubmV4dCA9IGxvYztcblxuICAgICAgICBpZiAoY2F1Z2h0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jayxcbiAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISEgY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gXCJyb290XCIpIHtcbiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZVxuICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG4gICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpICYmXG4gICAgICAgICAgICB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkgJiZcbiAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgIHR5cGUgPT09IFwiY29udGludWVcIikgJiZcbiAgICAgICAgICBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJlxuICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhXG4gICAgICAgIC8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay5cbiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG4gICAgICByZWNvcmQudHlwZSA9IHR5cGU7XG4gICAgICByZWNvcmQuYXJnID0gYXJnO1xuXG4gICAgICBpZiAoZmluYWxseUVudHJ5KSB7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jO1xuICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICB9LFxuXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xuICAgICAgICB0aGlzLm5leHQgPSByZWNvcmQuYXJnO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICB0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIgJiYgYWZ0ZXJMb2MpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH0sXG5cbiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpO1xuICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHJvd247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uXG4gICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG4gICAgfSxcblxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndFxuICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzcyBpdCBvbiB0byB0aGUgZGVsZWdhdGUuXG4gICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG4gIH07XG59KShcbiAgLy8gSW4gc2xvcHB5IG1vZGUsIHVuYm91bmQgYHRoaXNgIHJlZmVycyB0byB0aGUgZ2xvYmFsIG9iamVjdCwgZmFsbGJhY2sgdG9cbiAgLy8gRnVuY3Rpb24gY29uc3RydWN0b3IgaWYgd2UncmUgaW4gZ2xvYmFsIHN0cmljdCBtb2RlLiBUaGF0IGlzIHNhZGx5IGEgZm9ybVxuICAvLyBvZiBpbmRpcmVjdCBldmFsIHdoaWNoIHZpb2xhdGVzIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5LlxuICAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzIH0pKCkgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpXG4pO1xuIiwiZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykge1xuICB0cnkge1xuICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTtcbiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlamVjdChlcnJvcik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGluZm8uZG9uZSkge1xuICAgIHJlc29sdmUodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXG4gICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwibmV4dFwiLCB2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcInRocm93XCIsIGVycik7XG4gICAgICB9XG5cbiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7XG4gICAgfSk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2FzeW5jVG9HZW5lcmF0b3I7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfY2xhc3NDYWxsQ2hlY2s7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jcmVhdGVDbGFzczsiXSwic291cmNlUm9vdCI6IiJ9